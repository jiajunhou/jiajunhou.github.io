<!DOCTYPE html>
<html lang=zh>
<head>
    <!-- so meta -->
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="HandheldFriendly" content="True">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1" />
    <meta name="description" content="Lua 的面向对象：用闭包与元表实现游戏角色 HP&#x2F;MP 管理在 C++、Java 等语言中，面向对象（OOP）是 “开箱即用” 的特性 —— 有class关键字、private&#x2F;public访问控制、继承等语法糖。但 Lua 作为一门轻量级脚本语言，并没有原生的 OOP 语法，却能通过闭包（Closure） 和元表（Metatable） 这两个核心特性，实现完整的 OOP 功">
<meta property="og:type" content="article">
<meta property="og:title" content="Lua的面向对象">
<meta property="og:url" content="http://example.com/2025/09/09/Lua%E7%9A%84%E9%9D%A2%E5%90%91%E5%AF%B9%E8%B1%A1/index.html">
<meta property="og:site_name" content="jiajun">
<meta property="og:description" content="Lua 的面向对象：用闭包与元表实现游戏角色 HP&#x2F;MP 管理在 C++、Java 等语言中，面向对象（OOP）是 “开箱即用” 的特性 —— 有class关键字、private&#x2F;public访问控制、继承等语法糖。但 Lua 作为一门轻量级脚本语言，并没有原生的 OOP 语法，却能通过闭包（Closure） 和元表（Metatable） 这两个核心特性，实现完整的 OOP 功">
<meta property="og:locale" content="zh_TW">
<meta property="article:published_time" content="2025-09-09T08:54:38.000Z">
<meta property="article:modified_time" content="2025-09-10T03:28:14.333Z">
<meta property="article:author" content="jiajun Hou">
<meta name="twitter:card" content="summary">
    
    
        
          
              <link rel="shortcut icon" href="/images/favicon.ico">
          
        
        
          
            <link rel="icon" type="image/png" href="/images/favicon-192x192.png" sizes="192x192">
          
        
        
          
            <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon.png">
          
        
    
    <!-- title -->
    <title>Lua的面向对象</title>
    <!-- styles -->
    
<link rel="stylesheet" href="/lib/font-awesome/css/font-awesome.min.css">

    
<link rel="stylesheet" href="/lib/meslo-LG/styles.css">

    
<link rel="stylesheet" href="/lib/justified-gallery/justifiedGallery.min.css">

    
<link rel="stylesheet" href="/css/style.css">

    <!-- rss -->
    
    
    <!-- jquery -->
    
<script src="/lib/jquery/jquery.min.js"></script>

<meta name="generator" content="Hexo 7.3.0"></head>

<body>
    <div class="banner">
<div id="blogtitel" class="blogtitel">jiajun</div>
<ul id="wrapper" class="wrapper">
  <div class="sun">
    <div class="star"></div>
  </div>
  <div class="mercury">
    <div class="planet">
      <div class="shadow"></div>
    </div>
  </div>
  <div class="venus">
    <div class="planet">
      <div class="shadow"></div>
    </div>
  </div>
  <div class="earth">
    <div class="planet"><div class="shadow"></div></div>
  </div>
  <div class="mars">
    <div class="planet"><div class="shadow"></div></div>
  </div>
  <div class="jupiter">
    <div class="planet"><div class="shadow"></div></div>
  </div>
</ul>
</div>

    <div class="background">
      
        <div id="header-post">
  <a id="menu-icon" href="#"><i class="fa fa-bars fa-lg"></i></a>
  <a id="menu-icon-tablet" href="#"><i class="fa fa-bars fa-lg"></i></a>
  <a id="top-icon-tablet" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');" style="display:none;"><i class="fa fa-chevron-up fa-lg"></i></a>
  <span id="menu">
    <span id="nav">
      <ul>
         
          <li><a href="/home/">Home</a></li>
         
          <li><a href="/about/">About</a></li>
         
          <li><a href="/archives/">Writing</a></li>
         
          <li><a target="_blank" rel="noopener" href="https://github.com/jiajunhou">Projects</a></li>
        
      </ul>
    </span>
    <br/>
    <span id="actions">
      <ul>
        
        
        <li><a class="icon" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');"><i class="fa fa-chevron-up" aria-hidden="true" onmouseover='$("#i-top").toggle();' onmouseout='$("#i-top").toggle();'></i></a></li>
        <li><a class="icon" href="#"><i class="fa fa-share-alt" aria-hidden="true" onmouseover='$("#i-share").toggle();' onmouseout='$("#i-share").toggle();' onclick='$("#share").toggle();return false;'></i></a></li>
      </ul>
      <span id="i-prev" class="info" style="display:none;">Previous post</span>
      <span id="i-next" class="info" style="display:none;">Next post</span>
      <span id="i-top" class="info" style="display:none;">Back to top</span>
      <span id="i-share" class="info" style="display:none;">Share post</span>
    </span>
    <br/>
    <div id="share" style="display: none">
      <ul>
  <li><a class="icon" target="_blank" rel="noopener" href="http://www.facebook.com/sharer.php?u=http://example.com/2025/09/09/Lua%E7%9A%84%E9%9D%A2%E5%90%91%E5%AF%B9%E8%B1%A1/"><i class="fa fa-facebook " aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="https://twitter.com/share?url=http://example.com/2025/09/09/Lua%E7%9A%84%E9%9D%A2%E5%90%91%E5%AF%B9%E8%B1%A1/&text=Lua的面向对象"><i class="fa fa-twitter " aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="http://www.linkedin.com/shareArticle?url=http://example.com/2025/09/09/Lua%E7%9A%84%E9%9D%A2%E5%90%91%E5%AF%B9%E8%B1%A1/&title=Lua的面向对象"><i class="fa fa-linkedin " aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="https://pinterest.com/pin/create/bookmarklet/?url=http://example.com/2025/09/09/Lua%E7%9A%84%E9%9D%A2%E5%90%91%E5%AF%B9%E8%B1%A1/&is_video=false&description=Lua的面向对象"><i class="fa fa-pinterest " aria-hidden="true"></i></a></li>
  <li><a class="icon" href="mailto:?subject=Lua的面向对象&body=Check out this article: http://example.com/2025/09/09/Lua%E7%9A%84%E9%9D%A2%E5%90%91%E5%AF%B9%E8%B1%A1/"><i class="fa fa-envelope " aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="https://getpocket.com/save?url=http://example.com/2025/09/09/Lua%E7%9A%84%E9%9D%A2%E5%90%91%E5%AF%B9%E8%B1%A1/&title=Lua的面向对象"><i class="fa fa-get-pocket " aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="http://reddit.com/submit?url=http://example.com/2025/09/09/Lua%E7%9A%84%E9%9D%A2%E5%90%91%E5%AF%B9%E8%B1%A1/&title=Lua的面向对象"><i class="fa fa-reddit " aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="http://www.stumbleupon.com/submit?url=http://example.com/2025/09/09/Lua%E7%9A%84%E9%9D%A2%E5%90%91%E5%AF%B9%E8%B1%A1/&title=Lua的面向对象"><i class="fa fa-stumbleupon " aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="http://digg.com/submit?url=http://example.com/2025/09/09/Lua%E7%9A%84%E9%9D%A2%E5%90%91%E5%AF%B9%E8%B1%A1/&title=Lua的面向对象"><i class="fa fa-digg " aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="http://www.tumblr.com/share/link?url=http://example.com/2025/09/09/Lua%E7%9A%84%E9%9D%A2%E5%90%91%E5%AF%B9%E8%B1%A1/&name=Lua的面向对象&description="><i class="fa fa-tumblr " aria-hidden="true"></i></a></li>
</ul>

    </div>
    <div id="toc">
      <ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#Lua-%E7%9A%84%E9%9D%A2%E5%90%91%E5%AF%B9%E8%B1%A1%EF%BC%9A%E7%94%A8%E9%97%AD%E5%8C%85%E4%B8%8E%E5%85%83%E8%A1%A8%E5%AE%9E%E7%8E%B0%E6%B8%B8%E6%88%8F%E8%A7%92%E8%89%B2-HP-MP-%E7%AE%A1%E7%90%86"><span class="toc-number">1.</span> <span class="toc-text">Lua 的面向对象：用闭包与元表实现游戏角色 HP&#x2F;MP 管理</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%B8%80%E3%80%81Lua-OOP-%E7%9A%84%E6%A0%B8%E5%BF%83%EF%BC%9A%E9%97%AD%E5%8C%85%E4%B8%8E%E5%85%83%E8%A1%A8%E7%9A%84%E5%AE%9A%E4%BD%8D"><span class="toc-number">1.1.</span> <span class="toc-text">一、Lua OOP 的核心：闭包与元表的定位</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%BA%8C%E3%80%81%E5%85%A5%E9%97%A8%EF%BC%9A%E7%94%A8%E9%97%AD%E5%8C%85%E5%AE%9E%E7%8E%B0%E5%8D%95%E4%B8%AA%E8%A7%92%E8%89%B2%E7%9A%84-HP-MP-%E7%AE%A1%E7%90%86%EF%BC%88%E5%B0%81%E8%A3%85%EF%BC%89"><span class="toc-number">1.2.</span> <span class="toc-text">二、入门：用闭包实现单个角色的 HP&#x2F;MP 管理（封装）</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-%E5%AE%9E%E7%8E%B0%E6%80%9D%E8%B7%AF"><span class="toc-number">1.2.1.</span> <span class="toc-text">1. 实现思路</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-%E5%AE%8C%E6%95%B4%E4%BB%A3%E7%A0%81%EF%BC%9A%E9%97%AD%E5%8C%85%E5%AE%9E%E7%8E%B0%E8%A7%92%E8%89%B2-HP-MP"><span class="toc-number">1.2.2.</span> <span class="toc-text">2. 完整代码：闭包实现角色 HP&#x2F;MP</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-%E4%BD%BF%E7%94%A8%E7%A4%BA%E4%BE%8B%EF%BC%9A%E5%88%9B%E5%BB%BA%E4%B8%A4%E4%B8%AA%E7%8B%AC%E7%AB%8B%E8%A7%92%E8%89%B2"><span class="toc-number">1.2.3.</span> <span class="toc-text">3. 使用示例：创建两个独立角色</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-%E9%97%AD%E5%8C%85%E5%AE%9E%E7%8E%B0%E7%9A%84%E4%BC%98%E5%8A%BF%E4%B8%8E%E5%B1%80%E9%99%90"><span class="toc-number">1.2.4.</span> <span class="toc-text">4. 闭包实现的优势与局限</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%B8%89%E3%80%81%E8%BF%9B%E9%98%B6%EF%BC%9A%E7%94%A8%E5%85%83%E8%A1%A8%E5%AE%9E%E7%8E%B0%E8%A7%92%E8%89%B2%E7%B1%BB%E4%B8%8E%E7%BB%A7%E6%89%BF%EF%BC%88%E6%96%B9%E6%B3%95%E5%85%B1%E4%BA%AB-%E5%A4%9A%E6%80%81%EF%BC%89"><span class="toc-number">1.3.</span> <span class="toc-text">三、进阶：用元表实现角色类与继承（方法共享 + 多态）</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-%E5%AE%9E%E7%8E%B0%E6%80%9D%E8%B7%AF-1"><span class="toc-number">1.3.1.</span> <span class="toc-text">1. 实现思路</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-%E5%AE%8C%E6%95%B4%E4%BB%A3%E7%A0%81%EF%BC%9A%E5%85%83%E8%A1%A8%E5%AE%9E%E7%8E%B0%E8%A7%92%E8%89%B2%E7%BB%A7%E6%89%BF"><span class="toc-number">1.3.2.</span> <span class="toc-text">2. 完整代码：元表实现角色继承</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-%E4%BD%BF%E7%94%A8%E7%A4%BA%E4%BE%8B%EF%BC%9A%E6%88%98%E5%A3%AB%E4%B8%8E%E6%B3%95%E5%B8%88%E7%9A%84%E6%88%98%E6%96%97"><span class="toc-number">1.3.3.</span> <span class="toc-text">3. 使用示例：战士与法师的战斗</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-%E5%85%83%E8%A1%A8%E5%AE%9E%E7%8E%B0%E7%9A%84%E4%BC%98%E5%8A%BF"><span class="toc-number">1.3.4.</span> <span class="toc-text">4. 元表实现的优势</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%9B%9B%E3%80%81Lua-OOP-vs-TS-Rust%EF%BC%9A%E7%BB%99%E5%89%8D%E7%AB%AF-Rust-%E5%BC%80%E5%8F%91%E8%80%85%E7%9A%84%E5%AF%B9%E6%AF%94%E6%80%9D%E8%80%83"><span class="toc-number">1.4.</span> <span class="toc-text">四、Lua OOP vs TS&#x2F;Rust：给前端 &#x2F; Rust 开发者的对比思考</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%BA%94%E3%80%81%E6%80%BB%E7%BB%93%EF%BC%9ALua-OOP-%E7%9A%84%E6%9C%80%E4%BD%B3%E5%AE%9E%E8%B7%B5"><span class="toc-number">1.5.</span> <span class="toc-text">五、总结：Lua OOP 的最佳实践</span></a></li></ol></li></ol>
    </div>
  </span>
</div>

      
      <div class="content index width mx-auto px2 my4">
          
          <article class="post" itemscope itemtype="http://schema.org/BlogPosting">
  <header>
    
    <h1 class="posttitle" itemprop="name headline">
        Lua的面向对象
    </h1>



    <div class="meta">
      <span class="author" itemprop="author" itemscope itemtype="http://schema.org/Person">
        <span itemprop="name">jiajun</span>
      </span>
      
    <div class="postdate">
        <time datetime="2025-09-09T08:54:38.000Z" itemprop="datePublished">2025-09-09</time>
    </div>


      

    </div>
  </header>
  

  <div class="content" itemprop="articleBody">
    <h1 id="Lua-的面向对象：用闭包与元表实现游戏角色-HP-MP-管理"><a href="#Lua-的面向对象：用闭包与元表实现游戏角色-HP-MP-管理" class="headerlink" title="Lua 的面向对象：用闭包与元表实现游戏角色 HP&#x2F;MP 管理"></a>Lua 的面向对象：用闭包与元表实现游戏角色 HP&#x2F;MP 管理</h1><p>在 C++、Java 等语言中，面向对象（OOP）是 “开箱即用” 的特性 —— 有<code>class</code>关键字、<code>private</code>&#x2F;<code>public</code>访问控制、继承等语法糖。但 Lua 作为一门轻量级脚本语言，并没有原生的 OOP 语法，却能通过<strong>闭包（Closure）</strong> 和<strong>元表（Metatable）</strong> 这两个核心特性，实现完整的 OOP 功能（封装、继承、多态）。</p>
<p>对于习惯了 TypeScript（TS）的前端工程师，或使用 Rust 等注重封装的开发者来说，Lua 的闭包思想其实很容易理解 —— 它像 TS 的<code>private</code>字段一样，能隐藏内部状态；而元表则类似 TS 的原型链，可实现方法共享与继承。本文将以游戏开发中最常见的 “角色 HP&#x2F;MP 管理” 为例，带你一步步用 Lua 实现 OOP，从简单的闭包封装到灵活的元表继承。</p>
<h2 id="一、Lua-OOP-的核心：闭包与元表的定位"><a href="#一、Lua-OOP-的核心：闭包与元表的定位" class="headerlink" title="一、Lua OOP 的核心：闭包与元表的定位"></a>一、Lua OOP 的核心：闭包与元表的定位</h2><p>在开始代码前，先明确两个特性的核心作用 —— 这是理解 Lua OOP 的关键：</p>
<table>
<thead>
<tr>
<th>特性</th>
<th>核心作用</th>
<th>类比 TS&#x2F;Rust 概念</th>
</tr>
</thead>
<tbody><tr>
<td>闭包</td>
<td>封装私有状态（如角色的 HP&#x2F;MP），外部无法直接修改</td>
<td>TS 的<code>private</code>字段、Rust 的<code>private</code>成员</td>
</tr>
<tr>
<td>元表</td>
<td>实现方法共享（避免每个实例重复定义方法）、继承</td>
<td>TS 的原型链（<code>prototype</code>）、Rust 的<code>trait</code></td>
</tr>
</tbody></table>
<p>简单说：<strong>闭包负责 “藏数据”，元表负责 “省代码”</strong>。下面先从最直观的闭包实现开始，再进阶到元表。</p>
<h2 id="二、入门：用闭包实现单个角色的-HP-MP-管理（封装）"><a href="#二、入门：用闭包实现单个角色的-HP-MP-管理（封装）" class="headerlink" title="二、入门：用闭包实现单个角色的 HP&#x2F;MP 管理（封装）"></a>二、入门：用闭包实现单个角色的 HP&#x2F;MP 管理（封装）</h2><p>游戏中，每个角色的 HP（生命值）和 MP（魔法值）是 “私有状态”—— 不能让外部直接修改（比如不能写<code>player.HP = 9999</code>作弊），只能通过 “回血”“扣蓝” 等特定方法操作。闭包的 “状态捕获” 能力，恰好能实现这种封装。</p>
<h3 id="1-实现思路"><a href="#1-实现思路" class="headerlink" title="1. 实现思路"></a>1. 实现思路</h3><ul>
<li><p>定义<code>createPlayer</code>函数：作为 “构造函数”，接收角色初始属性（名字、初始 HP、初始 MP）。</p>
</li>
<li><p>内部定义私有状态：<code>local HP</code>和<code>local MP</code>—— 用<code>local</code>关键字限制作用域，外部无法直接访问。</p>
</li>
<li><p>定义公共方法：<code>addHP</code>（回血）、<code>subHP</code>（扣血）、<code>addMP</code>（回蓝）、<code>subMP</code>（扣蓝）、<code>getStatus</code>（查看状态），这些方法通过闭包 “捕获” 私有状态，可修改内部值，但外部只能调用方法。</p>
</li>
<li><p>返回公共方法：将方法封装成表（Table）返回，外部通过表的键名（如<code>player.addHP</code>）调用方法。</p>
</li>
</ul>
<h3 id="2-完整代码：闭包实现角色-HP-MP"><a href="#2-完整代码：闭包实现角色-HP-MP" class="headerlink" title="2. 完整代码：闭包实现角色 HP&#x2F;MP"></a>2. 完整代码：闭包实现角色 HP&#x2F;MP</h3><figure class="highlight lua"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 构造函数：创建角色实例，返回包含公共方法的表</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">createPlayer</span><span class="params">(name, initHP, initMP)</span></span></span><br><span class="line">    <span class="comment">-- 1. 私有状态：HP和MP，外部无法直接访问（闭包的核心）</span></span><br><span class="line">    <span class="keyword">local</span> HP = initHP <span class="keyword">or</span> <span class="number">100</span>  <span class="comment">-- 默认初始HP=100</span></span><br><span class="line">    <span class="keyword">local</span> MP = initMP <span class="keyword">or</span> <span class="number">50</span>   <span class="comment">-- 默认初始MP=50</span></span><br><span class="line">    <span class="keyword">local</span> name = name <span class="keyword">or</span> <span class="string">&quot;Unknown&quot;</span>  <span class="comment">-- 角色名</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">-- 2. 公共方法：只能通过这些方法修改私有状态</span></span><br><span class="line">    <span class="keyword">local</span> methods = &#123;</span><br><span class="line">        <span class="comment">-- 回血：参数为回血值，HP不超过初始值的120%（防止无限回血）</span></span><br><span class="line">        addHP = <span class="function"><span class="keyword">function</span><span class="params">(amount)</span></span></span><br><span class="line">            <span class="keyword">local</span> maxHP = initHP * <span class="number">1.2</span>  <span class="comment">-- 最大HP限制</span></span><br><span class="line">            HP = HP + amount</span><br><span class="line">            <span class="keyword">if</span> HP &gt; maxHP <span class="keyword">then</span></span><br><span class="line">                HP = maxHP  <span class="comment">-- 超出上限时强制设为上限</span></span><br><span class="line">            <span class="keyword">end</span></span><br><span class="line">            <span class="built_in">print</span>(<span class="built_in">string</span>.<span class="built_in">format</span>(<span class="string">&quot;[%s] 回血%d点，当前HP: %.0f&quot;</span>, name, amount, HP))</span><br><span class="line">            <span class="keyword">return</span> HP</span><br><span class="line">        <span class="keyword">end</span>,</span><br><span class="line"></span><br><span class="line">        <span class="comment">-- 扣血：参数为扣血量，HP不低于0（防止负血）</span></span><br><span class="line">        subHP = <span class="function"><span class="keyword">function</span><span class="params">(amount)</span></span></span><br><span class="line">            HP = HP - amount</span><br><span class="line">            <span class="keyword">if</span> HP &lt; <span class="number">0</span> <span class="keyword">then</span></span><br><span class="line">                HP = <span class="number">0</span>  <span class="comment">-- 低于0时设为0（角色死亡）</span></span><br><span class="line">                <span class="built_in">print</span>(<span class="built_in">string</span>.<span class="built_in">format</span>(<span class="string">&quot;[%s] 受到%d点伤害，HP耗尽！&quot;</span>, name, amount))</span><br><span class="line">            <span class="keyword">else</span></span><br><span class="line">                <span class="built_in">print</span>(<span class="built_in">string</span>.<span class="built_in">format</span>(<span class="string">&quot;[%s] 受到%d点伤害，当前HP: %.0f&quot;</span>, name, amount, HP))</span><br><span class="line">            <span class="keyword">end</span></span><br><span class="line">            <span class="keyword">return</span> HP</span><br><span class="line">        <span class="keyword">end</span>,</span><br><span class="line"></span><br><span class="line">        <span class="comment">-- 回蓝：逻辑同回血，MP不超过初始值的120%</span></span><br><span class="line">        addMP = <span class="function"><span class="keyword">function</span><span class="params">(amount)</span></span></span><br><span class="line">            <span class="keyword">local</span> maxMP = initMP * <span class="number">1.2</span></span><br><span class="line">            MP = MP + amount</span><br><span class="line">            <span class="keyword">if</span> MP &gt; maxMP <span class="keyword">then</span></span><br><span class="line">                MP = maxMP</span><br><span class="line">            <span class="keyword">end</span></span><br><span class="line">            <span class="built_in">print</span>(<span class="built_in">string</span>.<span class="built_in">format</span>(<span class="string">&quot;[%s] 回蓝%d点，当前MP: %.0f&quot;</span>, name, amount, MP))</span><br><span class="line">            <span class="keyword">return</span> MP</span><br><span class="line">        <span class="keyword">end</span>,</span><br><span class="line"></span><br><span class="line">        <span class="comment">-- 扣蓝：MP不低于0</span></span><br><span class="line">        subMP = <span class="function"><span class="keyword">function</span><span class="params">(amount)</span></span></span><br><span class="line">            <span class="keyword">if</span> MP &lt; amount <span class="keyword">then</span></span><br><span class="line">                <span class="built_in">print</span>(<span class="built_in">string</span>.<span class="built_in">format</span>(<span class="string">&quot;[%s] 蓝量不足！当前MP: %.0f，需要: %d&quot;</span>, name, MP, amount))</span><br><span class="line">                <span class="keyword">return</span> MP  <span class="comment">-- 蓝不够时不扣，返回当前值</span></span><br><span class="line">            <span class="keyword">end</span></span><br><span class="line">            MP = MP - amount</span><br><span class="line">            <span class="built_in">print</span>(<span class="built_in">string</span>.<span class="built_in">format</span>(<span class="string">&quot;[%s] 消耗%d点蓝，当前MP: %.0f&quot;</span>, name, amount, MP))</span><br><span class="line">            <span class="keyword">return</span> MP</span><br><span class="line">        <span class="keyword">end</span>,</span><br><span class="line"></span><br><span class="line">        <span class="comment">-- 查看角色状态：返回HP和MP（只读）</span></span><br><span class="line">        getStatus = <span class="function"><span class="keyword">function</span><span class="params">()</span></span></span><br><span class="line">            <span class="keyword">return</span> <span class="built_in">string</span>.<span class="built_in">format</span>(<span class="string">&quot;[%s] 状态 - HP: %.0f, MP: %.0f&quot;</span>, name, HP, MP)</span><br><span class="line">        <span class="keyword">end</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">-- 返回公共方法表，外部通过表调用方法</span></span><br><span class="line">    <span class="keyword">return</span> methods</span><br><span class="line"><span class="keyword">end</span></span><br></pre></td></tr></table></figure>

<h3 id="3-使用示例：创建两个独立角色"><a href="#3-使用示例：创建两个独立角色" class="headerlink" title="3. 使用示例：创建两个独立角色"></a>3. 使用示例：创建两个独立角色</h3><p>每个通过<code>createPlayer</code>创建的角色，都是一个独立的闭包实例 —— 它们的 HP&#x2F;MP 互不干扰，外部只能通过方法操作：</p>
<figure class="highlight lua"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 1. 创建战士角色：名字&quot;钢铁勇士&quot;，初始HP=200，MP=30</span></span><br><span class="line"><span class="keyword">local</span> warrior = createPlayer(<span class="string">&quot;钢铁勇士&quot;</span>, <span class="number">200</span>, <span class="number">30</span>)</span><br><span class="line"><span class="comment">-- 2. 创建法师角色：名字&quot;星术师&quot;，初始HP=80，MP=150</span></span><br><span class="line"><span class="keyword">local</span> mage = createPlayer(<span class="string">&quot;星术师&quot;</span>, <span class="number">80</span>, <span class="number">150</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 操作战士：回血、扣血、用蓝</span></span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;\n=== 操作战士 ===&quot;</span>)</span><br><span class="line">warrior.addHP(<span class="number">50</span>)    <span class="comment">-- 输出：[钢铁勇士] 回血50点，当前HP: 240（200*1.2=240，达到上限）</span></span><br><span class="line">warrior.subHP(<span class="number">30</span>)    <span class="comment">-- 输出：[钢铁勇士] 受到30点伤害，当前HP: 210</span></span><br><span class="line">warrior.subMP(<span class="number">10</span>)    <span class="comment">-- 输出：[钢铁勇士] 消耗10点蓝，当前MP: 20</span></span><br><span class="line"><span class="built_in">print</span>(warrior.getStatus())  <span class="comment">-- 输出：[钢铁勇士] 状态 - HP: 210, MP: 20</span></span><br><span class="line"></span><br><span class="line"><span class="comment">-- 操作法师：扣血、回蓝、尝试用超量蓝</span></span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;\n=== 操作法师 ===&quot;</span>)</span><br><span class="line">mage.subHP(<span class="number">20</span>)       <span class="comment">-- 输出：[星术师] 受到20点伤害，当前HP: 60</span></span><br><span class="line">mage.addMP(<span class="number">40</span>)       <span class="comment">-- 输出：[星术师] 回蓝40点，当前MP: 180（150*1.2=180，达到上限）</span></span><br><span class="line">mage.subMP(<span class="number">200</span>)      <span class="comment">-- 输出：[星术师] 蓝量不足！当前MP: 180，需要: 200</span></span><br><span class="line"><span class="built_in">print</span>(mage.getStatus())    <span class="comment">-- 输出：[星术师] 状态 - HP: 60, MP: 180</span></span><br></pre></td></tr></table></figure>

<h3 id="4-闭包实现的优势与局限"><a href="#4-闭包实现的优势与局限" class="headerlink" title="4. 闭包实现的优势与局限"></a>4. 闭包实现的优势与局限</h3><ul>
<li><strong>优势</strong>：</li>
</ul>
<ol>
<li><p>私有状态安全：外部无法直接修改<code>HP</code>&#x2F;<code>MP</code>，只能通过预设方法操作，避免非法修改。</p>
</li>
<li><p>实例独立：每个角色的状态完全隔离，战士的 HP 变化不会影响法师。</p>
</li>
<li><p>理解成本低：对 TS 开发者来说，类似在<code>class</code>中用<code>private</code>关键字定义字段，逻辑直观。</p>
</li>
</ol>
<ul>
<li><strong>局限</strong>：</li>
</ul>
<ol>
<li><p>方法重复：每个角色实例都会复制一份<code>addHP</code>&#x2F;<code>subHP</code>等方法（比如 100 个角色就有 100 份相同的方法），浪费内存。</p>
</li>
<li><p>难实现继承：如果需要创建 “战士”“法师”“刺客” 等不同职业（有共同方法，也有特殊技能），闭包模式下需要重复写大量代码。</p>
</li>
</ol>
<p>这时候，<strong>元表（Metatable）</strong> 就能解决这些问题 —— 它能让多个实例共享同一套方法，还能实现继承。</p>
<h2 id="三、进阶：用元表实现角色类与继承（方法共享-多态）"><a href="#三、进阶：用元表实现角色类与继承（方法共享-多态）" class="headerlink" title="三、进阶：用元表实现角色类与继承（方法共享 + 多态）"></a>三、进阶：用元表实现角色类与继承（方法共享 + 多态）</h2><p>在游戏中，“战士” 和 “法师” 有共同的基础操作（如<code>addHP</code>&#x2F;<code>getStatus</code>），但也有特殊技能（如战士的 “狂暴攻击”、法师的 “火球术”）。用元表可以将 “基础方法” 抽成 “父类”，让子类（战士、法师）继承基础方法，再添加自己的特殊方法 —— 这就是 Lua 的继承实现。</p>
<h3 id="1-实现思路-1"><a href="#1-实现思路-1" class="headerlink" title="1. 实现思路"></a>1. 实现思路</h3><ul>
<li>定义 “父类”<code>Player</code>：</li>
</ul>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">*   `Player.prototype`：存储所有基础方法（`addHP`/`subHP`等），所有实例共享这一套方法。</span><br><span class="line"></span><br><span class="line">*   `Player.new`：构造函数，创建实例时，通过元表将实例的`__index`指向`Player.prototype`，实现方法共享。</span><br><span class="line"></span><br><span class="line">*   私有状态：用闭包结合实例的 “隐藏字段”（如`self._HP`，约定下划线开头为私有），兼顾封装与方法共享。</span><br></pre></td></tr></table></figure>

<ul>
<li>定义 “子类”<code>Warrior</code>（战士）：</li>
</ul>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">*   继承`Player`的基础方法，通过元表将`Warrior.prototype.__index`指向`Warrior.prototype`，同时`Warrior.prototype`的`__index`指向`Player.prototype`（原型链继承）。</span><br><span class="line"></span><br><span class="line">*   添加特殊方法（如`rageAttack`，狂暴攻击，消耗 HP 换伤害）。</span><br></pre></td></tr></table></figure>

<h3 id="2-完整代码：元表实现角色继承"><a href="#2-完整代码：元表实现角色继承" class="headerlink" title="2. 完整代码：元表实现角色继承"></a>2. 完整代码：元表实现角色继承</h3><figure class="highlight lua"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 1. 父类：Player（基础角色类，包含共享方法）</span></span><br><span class="line"><span class="keyword">local</span> Player = &#123;&#125;</span><br><span class="line"><span class="comment">-- 父类的原型：存储所有基础方法，供所有实例共享</span></span><br><span class="line">Player.prototype = &#123;</span><br><span class="line">    <span class="comment">-- 回血：this指向当前实例（self是Lua的约定，类似TS的this）</span></span><br><span class="line">    addHP = <span class="function"><span class="keyword">function</span><span class="params">(self, amount)</span></span></span><br><span class="line">        <span class="keyword">local</span> maxHP = <span class="built_in">self</span>._initHP * <span class="number">1.2</span></span><br><span class="line">        <span class="built_in">self</span>._HP = <span class="built_in">self</span>._HP + amount</span><br><span class="line">        <span class="keyword">if</span> <span class="built_in">self</span>._HP &gt; maxHP <span class="keyword">then</span></span><br><span class="line">            <span class="built_in">self</span>._HP = maxHP</span><br><span class="line">        <span class="keyword">end</span></span><br><span class="line">        <span class="built_in">print</span>(<span class="built_in">string</span>.<span class="built_in">format</span>(<span class="string">&quot;[%s] 回血%d点，当前HP: %.0f&quot;</span>, <span class="built_in">self</span>.name, amount, <span class="built_in">self</span>._HP))</span><br><span class="line">        <span class="keyword">return</span> <span class="built_in">self</span>._HP</span><br><span class="line">    <span class="keyword">end</span>,</span><br><span class="line"></span><br><span class="line">    <span class="comment">-- 扣血</span></span><br><span class="line">    subHP = <span class="function"><span class="keyword">function</span><span class="params">(self, amount)</span></span></span><br><span class="line">        <span class="built_in">self</span>._HP = <span class="built_in">self</span>._HP - amount</span><br><span class="line">        <span class="keyword">if</span> <span class="built_in">self</span>._HP &lt; <span class="number">0</span> <span class="keyword">then</span></span><br><span class="line">            <span class="built_in">self</span>._HP = <span class="number">0</span></span><br><span class="line">            <span class="built_in">print</span>(<span class="built_in">string</span>.<span class="built_in">format</span>(<span class="string">&quot;[%s] 受到%d点伤害，HP耗尽！&quot;</span>, <span class="built_in">self</span>.name, amount))</span><br><span class="line">        <span class="keyword">else</span></span><br><span class="line">            <span class="built_in">print</span>(<span class="built_in">string</span>.<span class="built_in">format</span>(<span class="string">&quot;[%s] 受到%d点伤害，当前HP: %.0f&quot;</span>, <span class="built_in">self</span>.name, amount, <span class="built_in">self</span>._HP))</span><br><span class="line">        <span class="keyword">end</span></span><br><span class="line">        <span class="keyword">return</span> <span class="built_in">self</span>._HP</span><br><span class="line">    <span class="keyword">end</span>,</span><br><span class="line"></span><br><span class="line">    <span class="comment">-- 回蓝</span></span><br><span class="line">    addMP = <span class="function"><span class="keyword">function</span><span class="params">(self, amount)</span></span></span><br><span class="line">        <span class="keyword">local</span> maxMP = <span class="built_in">self</span>._initMP * <span class="number">1.2</span></span><br><span class="line">        <span class="built_in">self</span>._MP = <span class="built_in">self</span>._MP + amount</span><br><span class="line">        <span class="keyword">if</span> <span class="built_in">self</span>._MP &gt; maxMP <span class="keyword">then</span></span><br><span class="line">            <span class="built_in">self</span>._MP = maxMP</span><br><span class="line">        <span class="keyword">end</span></span><br><span class="line">        <span class="built_in">print</span>(<span class="built_in">string</span>.<span class="built_in">format</span>(<span class="string">&quot;[%s] 回蓝%d点，当前MP: %.0f&quot;</span>, <span class="built_in">self</span>.name, amount, <span class="built_in">self</span>._MP))</span><br><span class="line">        <span class="keyword">return</span> <span class="built_in">self</span>._MP</span><br><span class="line">    <span class="keyword">end</span>,</span><br><span class="line"></span><br><span class="line">    <span class="comment">-- 扣蓝</span></span><br><span class="line">    subMP = <span class="function"><span class="keyword">function</span><span class="params">(self, amount)</span></span></span><br><span class="line">        <span class="keyword">if</span> <span class="built_in">self</span>._MP &lt; amount <span class="keyword">then</span></span><br><span class="line">            <span class="built_in">print</span>(<span class="built_in">string</span>.<span class="built_in">format</span>(<span class="string">&quot;[%s] 蓝量不足！当前MP: %.0f，需要: %d&quot;</span>, <span class="built_in">self</span>.name, <span class="built_in">self</span>._MP, amount))</span><br><span class="line">            <span class="keyword">return</span> <span class="built_in">self</span>._MP</span><br><span class="line">        <span class="keyword">end</span></span><br><span class="line">        <span class="built_in">self</span>._MP = <span class="built_in">self</span>._MP - amount</span><br><span class="line">        <span class="built_in">print</span>(<span class="built_in">string</span>.<span class="built_in">format</span>(<span class="string">&quot;[%s] 消耗%d点蓝，当前MP: %.0f&quot;</span>, <span class="built_in">self</span>.name, amount, <span class="built_in">self</span>._MP))</span><br><span class="line">        <span class="keyword">return</span> <span class="built_in">self</span>._MP</span><br><span class="line">    <span class="keyword">end</span>,</span><br><span class="line"></span><br><span class="line">    <span class="comment">-- 查看状态</span></span><br><span class="line">    getStatus = <span class="function"><span class="keyword">function</span><span class="params">(self)</span></span></span><br><span class="line">        <span class="keyword">return</span> <span class="built_in">string</span>.<span class="built_in">format</span>(<span class="string">&quot;[%s] 状态 - HP: %.0f, MP: %.0f&quot;</span>, <span class="built_in">self</span>.name, <span class="built_in">self</span>._HP, <span class="built_in">self</span>._MP)</span><br><span class="line">    <span class="keyword">end</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 父类的构造函数：创建Player实例</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Player.new</span><span class="params">(name, initHP, initMP)</span></span></span><br><span class="line">    <span class="comment">-- 实例对象：存储私有状态（_HP/_MP/_initHP，约定下划线为私有）</span></span><br><span class="line">    <span class="keyword">local</span> <span class="built_in">self</span> = &#123;</span><br><span class="line">        name = name <span class="keyword">or</span> <span class="string">&quot;Unknown&quot;</span>,</span><br><span class="line">        _initHP = initHP <span class="keyword">or</span> <span class="number">100</span>,  <span class="comment">-- 初始HP（私有，用于计算最大HP）</span></span><br><span class="line">        _initMP = initMP <span class="keyword">or</span> <span class="number">50</span>,   <span class="comment">-- 初始MP（私有）</span></span><br><span class="line">        _HP = initHP <span class="keyword">or</span> <span class="number">100</span>,      <span class="comment">-- 当前HP（私有）</span></span><br><span class="line">        _MP = initMP <span class="keyword">or</span> <span class="number">50</span>        <span class="comment">-- 当前MP（私有）</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">-- 设置元表：让实例的__index指向Player.prototype（共享方法）</span></span><br><span class="line">    <span class="built_in">setmetatable</span>(<span class="built_in">self</span>, &#123; <span class="built_in">__index</span> = Player.prototype &#125;)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> <span class="built_in">self</span></span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line"><span class="comment">-- 2. 子类：Warrior（战士，继承Player）</span></span><br><span class="line"><span class="keyword">local</span> Warrior = &#123;&#125;</span><br><span class="line"><span class="comment">-- 子类的原型：存储战士的特殊方法，同时继承父类的方法</span></span><br><span class="line">Warrior.prototype = &#123;</span><br><span class="line">    <span class="comment">-- 继承父类的原型：当子类没有该方法时，去父类原型找</span></span><br><span class="line">    <span class="built_in">__index</span> = Player.prototype,</span><br><span class="line"></span><br><span class="line">    <span class="comment">-- 战士特殊技能：狂暴攻击（消耗10%HP，造成2倍伤害）</span></span><br><span class="line">    rageAttack = <span class="function"><span class="keyword">function</span><span class="params">(self, enemy)</span></span></span><br><span class="line">        <span class="keyword">local</span> hpCost = <span class="built_in">self</span>._HP * <span class="number">0.1</span>  <span class="comment">-- 消耗当前10%的HP</span></span><br><span class="line">        <span class="built_in">self</span>:subHP(hpCost)  <span class="comment">-- 调用父类的subHP方法（扣血）</span></span><br><span class="line">        </span><br><span class="line">        <span class="keyword">local</span> damage = hpCost * <span class="number">2</span>  <span class="comment">-- 伤害是消耗HP的2倍</span></span><br><span class="line">        enemy:subHP(damage)  <span class="comment">-- 敌人扣血</span></span><br><span class="line">        </span><br><span class="line">        <span class="built_in">print</span>(<span class="built_in">string</span>.<span class="built_in">format</span>(<span class="string">&quot;[%s] 发动狂暴攻击！消耗%.0fHP，对%s造成%.0f伤害&quot;</span>, </span><br><span class="line">            <span class="built_in">self</span>.name, hpCost, enemy.name, damage))</span><br><span class="line">    <span class="keyword">end</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 子类的构造函数：创建Warrior实例</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Warrior.new</span><span class="params">(name, initHP, initMP)</span></span></span><br><span class="line">    <span class="comment">-- 1. 先调用父类的构造函数，获取基础实例</span></span><br><span class="line">    <span class="keyword">local</span> <span class="built_in">self</span> = Player.new(name, initHP <span class="keyword">or</span> <span class="number">200</span>, initMP <span class="keyword">or</span> <span class="number">30</span>)  <span class="comment">-- 战士初始HP更高，MP更低</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">-- 2. 重设元表：让实例的__index指向Warrior.prototype（优先用子类方法）</span></span><br><span class="line">    <span class="built_in">setmetatable</span>(<span class="built_in">self</span>, &#123; <span class="built_in">__index</span> = Warrior.prototype &#125;)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> <span class="built_in">self</span></span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line"><span class="comment">-- 3. 子类：Mage（法师，继承Player）</span></span><br><span class="line"><span class="keyword">local</span> Mage = &#123;&#125;</span><br><span class="line">Mage.prototype = &#123;</span><br><span class="line">    <span class="built_in">__index</span> = Player.prototype,</span><br><span class="line"></span><br><span class="line">    <span class="comment">-- 法师特殊技能：火球术（消耗20MP，造成固定50点伤害）</span></span><br><span class="line">    fireball = <span class="function"><span class="keyword">function</span><span class="params">(self, enemy)</span></span></span><br><span class="line">        <span class="keyword">local</span> mpCost = <span class="number">20</span>  <span class="comment">-- 固定消耗20MP</span></span><br><span class="line">        <span class="keyword">if</span> <span class="built_in">self</span>._MP &lt; mpCost <span class="keyword">then</span></span><br><span class="line">            <span class="built_in">print</span>(<span class="built_in">string</span>.<span class="built_in">format</span>(<span class="string">&quot;[%s] 火球术蓝量不足！&quot;</span>, <span class="built_in">self</span>.name))</span><br><span class="line">            <span class="keyword">return</span></span><br><span class="line">        <span class="keyword">end</span></span><br><span class="line">        <span class="built_in">self</span>:subMP(mpCost)  <span class="comment">-- 调用父类的subMP方法（扣蓝）</span></span><br><span class="line">        </span><br><span class="line">        <span class="keyword">local</span> damage = <span class="number">50</span>  <span class="comment">-- 固定伤害50点</span></span><br><span class="line">        enemy:subHP(damage)  <span class="comment">-- 敌人扣血</span></span><br><span class="line">        </span><br><span class="line">        <span class="built_in">print</span>(<span class="built_in">string</span>.<span class="built_in">format</span>(<span class="string">&quot;[%s] 释放火球术！消耗%dMP，对%s造成%d伤害&quot;</span>, </span><br><span class="line">            <span class="built_in">self</span>.name, mpCost, enemy.name, damage))</span><br><span class="line">    <span class="keyword">end</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 法师构造函数</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Mage.new</span><span class="params">(name, initHP, initMP)</span></span></span><br><span class="line">    <span class="keyword">local</span> <span class="built_in">self</span> = Player.new(name, initHP <span class="keyword">or</span> <span class="number">80</span>, initMP <span class="keyword">or</span> <span class="number">150</span>)  <span class="comment">-- 法师初始HP低，MP高</span></span><br><span class="line">    <span class="built_in">setmetatable</span>(<span class="built_in">self</span>, &#123; <span class="built_in">__index</span> = Mage.prototype &#125;)</span><br><span class="line">    <span class="keyword">return</span> <span class="built_in">self</span></span><br><span class="line"><span class="keyword">end</span></span><br></pre></td></tr></table></figure>

<h3 id="3-使用示例：战士与法师的战斗"><a href="#3-使用示例：战士与法师的战斗" class="headerlink" title="3. 使用示例：战士与法师的战斗"></a>3. 使用示例：战士与法师的战斗</h3><p>子类实例既能调用父类的基础方法（<code>addHP</code>&#x2F;<code>getStatus</code>），也能调用自己的特殊方法（<code>rageAttack</code>&#x2F;<code>fireball</code>），实现了 “多态”：</p>
<figure class="highlight lua"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 1. 创建子类实例：战士和法师</span></span><br><span class="line"><span class="keyword">local</span> warrior = Warrior.new(<span class="string">&quot;钢铁勇士&quot;</span>)  <span class="comment">-- 用默认初始值：HP=200，MP=30</span></span><br><span class="line"><span class="keyword">local</span> mage = Mage.new(<span class="string">&quot;星术师&quot;</span>)          <span class="comment">-- 用默认初始值：HP=80，MP=150</span></span><br><span class="line"></span><br><span class="line"><span class="comment">-- 2. 战斗过程</span></span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;\n=== 战斗开始 ===&quot;</span>)</span><br><span class="line"><span class="built_in">print</span>(warrior:getStatus())  <span class="comment">-- 输出：[钢铁勇士] 状态 - HP: 200, MP: 30</span></span><br><span class="line"><span class="built_in">print</span>(mage:getStatus())    <span class="comment">-- 输出：[星术师] 状态 - HP: 80, MP: 150</span></span><br><span class="line"></span><br><span class="line"><span class="comment">-- 法师先释放火球术</span></span><br><span class="line">mage:fireball(warrior)      <span class="comment">-- 输出：[星术师] 释放火球术！消耗20MP，对钢铁勇士造成50伤害</span></span><br><span class="line"><span class="built_in">print</span>(warrior:getStatus())  <span class="comment">-- 输出：[钢铁勇士] 状态 - HP: 150, MP: 30</span></span><br><span class="line"></span><br><span class="line"><span class="comment">-- 战士发动狂暴攻击</span></span><br><span class="line">warrior:rageAttack(mage)    <span class="comment">-- 输出：[钢铁勇士] 发动狂暴攻击！消耗15HP，对星术师造成30伤害</span></span><br><span class="line"><span class="built_in">print</span>(mage:getStatus())    <span class="comment">-- 输出：[星术师] 状态 - HP: 50, MP: 130</span></span><br><span class="line"></span><br><span class="line"><span class="comment">-- 法师再放火球术（蓝量足够）</span></span><br><span class="line">mage:fireball(warrior)      <span class="comment">-- 输出：[星术师] 释放火球术！消耗20MP，对钢铁勇士造成50伤害</span></span><br><span class="line"><span class="built_in">print</span>(warrior:getStatus())  <span class="comment">-- 输出：[钢铁勇士] 状态 - HP: 100, MP: 30</span></span><br><span class="line"></span><br><span class="line"><span class="comment">-- 战士再次狂暴攻击</span></span><br><span class="line">warrior:rageAttack(mage)    <span class="comment">-- 输出：[钢铁勇士] 发动狂暴攻击！消耗10HP，对星术师造成20伤害</span></span><br><span class="line"><span class="built_in">print</span>(mage:getStatus())    <span class="comment">-- 输出：[星术师] 状态 - HP: 30, MP: 110</span></span><br></pre></td></tr></table></figure>

<h3 id="4-元表实现的优势"><a href="#4-元表实现的优势" class="headerlink" title="4. 元表实现的优势"></a>4. 元表实现的优势</h3><ol>
<li><p><strong>方法共享</strong>：所有<code>Player</code>实例（包括战士、法师）共享同一套基础方法（<code>addHP</code>等），100 个角色也只需要 1 份方法，节省内存。</p>
</li>
<li><p><strong>灵活继承</strong>：子类（<code>Warrior</code>&#x2F;<code>Mage</code>）只需关注自己的特殊方法，基础方法直接继承父类，减少代码重复。</p>
</li>
<li><p><strong>多态支持</strong>：不同子类的特殊方法（<code>rageAttack</code>&#x2F;<code>fireball</code>），可通过统一的实例调用，符合 OOP 的多态思想。</p>
</li>
</ol>
<h2 id="四、Lua-OOP-vs-TS-Rust：给前端-Rust-开发者的对比思考"><a href="#四、Lua-OOP-vs-TS-Rust：给前端-Rust-开发者的对比思考" class="headerlink" title="四、Lua OOP vs TS&#x2F;Rust：给前端 &#x2F; Rust 开发者的对比思考"></a>四、Lua OOP vs TS&#x2F;Rust：给前端 &#x2F; Rust 开发者的对比思考</h2><p>如果你是前端工程师或 Rust 开发者，可能会好奇 Lua 的 OOP 与你熟悉的语言有何不同。这里用一个表格直观对比：</p>
<table>
<thead>
<tr>
<th>特性</th>
<th>Lua 实现方式</th>
<th>TS 实现方式</th>
<th>Rust 实现方式</th>
</tr>
</thead>
<tbody><tr>
<td>类定义</td>
<td>用表 + 元表模拟（如<code>Player.prototype</code>）</td>
<td>用<code>class</code>关键字</td>
<td>用<code>struct</code>定义数据，<code>impl</code>定义方法</td>
</tr>
<tr>
<td>私有字段</td>
<td>闭包 + 下划线约定（<code>_HP</code>）</td>
<td><code>private</code>关键字</td>
<td>默认<code>private</code>，<code>pub</code>关键字暴露</td>
</tr>
<tr>
<td>方法共享</td>
<td>元表<code>__index</code>指向原型</td>
<td>原型链（<code>prototype</code>）</td>
<td><code>trait</code>或<code>impl for struct</code>（方法不存储在实例中）</td>
</tr>
<tr>
<td>继承</td>
<td>原型链嵌套（子类原型指向父类原型）</td>
<td><code>extends</code>关键字</td>
<td><code>trait</code>继承或组合（Rust 不支持传统继承，推荐组合）</td>
</tr>
<tr>
<td>多态</td>
<td>方法重写（子类原型覆盖父类方法）</td>
<td>方法重写 +<code>abstract</code>类</td>
<td><code>trait</code>对象 + 动态分发</td>
</tr>
</tbody></table>
<p>核心结论：Lua 的 OOP 是 “手动搭积木”—— 用闭包和元表组合出所需功能，灵活性极高；而 TS&#x2F;Rust 是 “预制模块”—— 提供现成的语法糖，但灵活性稍低。对于游戏开发来说，Lua 的灵活性恰好适配了快速迭代的需求（比如临时给某个角色加特殊技能，无需修改父类）。</p>
<h2 id="五、总结：Lua-OOP-的最佳实践"><a href="#五、总结：Lua-OOP-的最佳实践" class="headerlink" title="五、总结：Lua OOP 的最佳实践"></a>五、总结：Lua OOP 的最佳实践</h2><p>通过游戏角色 HP&#x2F;MP 管理的例子，我们可以总结出 Lua OOP 的两种核心用法：</p>
<ol>
<li><p><strong>简单场景（单个实例 &#x2F; 无继承）</strong>：用闭包实现 —— 代码直观，私有状态安全，适合快速开发（如单个 BOSS 的属性管理）。</p>
</li>
<li><p><strong>复杂场景（多实例 &#x2F; 继承）</strong>：用元表 + 闭包结合 —— 元表实现方法共享与继承，闭包（或下划线约定）实现私有状态，适合多职业、多角色的大型系统。</p>
</li>
</ol>
<p>Lua 没有原生的<code>class</code>，但闭包和元表给了开发者 “创造 OOP” 的自由。对于前端或 Rust 开发者，只要理解 “闭包藏数据，元表省代码” 的核心，就能快速上手 Lua 的 OOP，并用它实现游戏、引擎插件等复杂场景。</p>

  </div>
</article>



      </div>
      
       <div id="footer-post-container">
  <div id="footer-post">

    <div id="nav-footer" style="display: none">
      <ul>
         
          <li><a href="/home/">Home</a></li>
         
          <li><a href="/about/">About</a></li>
         
          <li><a href="/archives/">Writing</a></li>
         
          <li><a target="_blank" rel="noopener" href="https://github.com/jiajunhou">Projects</a></li>
        
      </ul>
    </div>

    <div id="toc-footer" style="display: none">
      <ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#Lua-%E7%9A%84%E9%9D%A2%E5%90%91%E5%AF%B9%E8%B1%A1%EF%BC%9A%E7%94%A8%E9%97%AD%E5%8C%85%E4%B8%8E%E5%85%83%E8%A1%A8%E5%AE%9E%E7%8E%B0%E6%B8%B8%E6%88%8F%E8%A7%92%E8%89%B2-HP-MP-%E7%AE%A1%E7%90%86"><span class="toc-number">1.</span> <span class="toc-text">Lua 的面向对象：用闭包与元表实现游戏角色 HP&#x2F;MP 管理</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%B8%80%E3%80%81Lua-OOP-%E7%9A%84%E6%A0%B8%E5%BF%83%EF%BC%9A%E9%97%AD%E5%8C%85%E4%B8%8E%E5%85%83%E8%A1%A8%E7%9A%84%E5%AE%9A%E4%BD%8D"><span class="toc-number">1.1.</span> <span class="toc-text">一、Lua OOP 的核心：闭包与元表的定位</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%BA%8C%E3%80%81%E5%85%A5%E9%97%A8%EF%BC%9A%E7%94%A8%E9%97%AD%E5%8C%85%E5%AE%9E%E7%8E%B0%E5%8D%95%E4%B8%AA%E8%A7%92%E8%89%B2%E7%9A%84-HP-MP-%E7%AE%A1%E7%90%86%EF%BC%88%E5%B0%81%E8%A3%85%EF%BC%89"><span class="toc-number">1.2.</span> <span class="toc-text">二、入门：用闭包实现单个角色的 HP&#x2F;MP 管理（封装）</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-%E5%AE%9E%E7%8E%B0%E6%80%9D%E8%B7%AF"><span class="toc-number">1.2.1.</span> <span class="toc-text">1. 实现思路</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-%E5%AE%8C%E6%95%B4%E4%BB%A3%E7%A0%81%EF%BC%9A%E9%97%AD%E5%8C%85%E5%AE%9E%E7%8E%B0%E8%A7%92%E8%89%B2-HP-MP"><span class="toc-number">1.2.2.</span> <span class="toc-text">2. 完整代码：闭包实现角色 HP&#x2F;MP</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-%E4%BD%BF%E7%94%A8%E7%A4%BA%E4%BE%8B%EF%BC%9A%E5%88%9B%E5%BB%BA%E4%B8%A4%E4%B8%AA%E7%8B%AC%E7%AB%8B%E8%A7%92%E8%89%B2"><span class="toc-number">1.2.3.</span> <span class="toc-text">3. 使用示例：创建两个独立角色</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-%E9%97%AD%E5%8C%85%E5%AE%9E%E7%8E%B0%E7%9A%84%E4%BC%98%E5%8A%BF%E4%B8%8E%E5%B1%80%E9%99%90"><span class="toc-number">1.2.4.</span> <span class="toc-text">4. 闭包实现的优势与局限</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%B8%89%E3%80%81%E8%BF%9B%E9%98%B6%EF%BC%9A%E7%94%A8%E5%85%83%E8%A1%A8%E5%AE%9E%E7%8E%B0%E8%A7%92%E8%89%B2%E7%B1%BB%E4%B8%8E%E7%BB%A7%E6%89%BF%EF%BC%88%E6%96%B9%E6%B3%95%E5%85%B1%E4%BA%AB-%E5%A4%9A%E6%80%81%EF%BC%89"><span class="toc-number">1.3.</span> <span class="toc-text">三、进阶：用元表实现角色类与继承（方法共享 + 多态）</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-%E5%AE%9E%E7%8E%B0%E6%80%9D%E8%B7%AF-1"><span class="toc-number">1.3.1.</span> <span class="toc-text">1. 实现思路</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-%E5%AE%8C%E6%95%B4%E4%BB%A3%E7%A0%81%EF%BC%9A%E5%85%83%E8%A1%A8%E5%AE%9E%E7%8E%B0%E8%A7%92%E8%89%B2%E7%BB%A7%E6%89%BF"><span class="toc-number">1.3.2.</span> <span class="toc-text">2. 完整代码：元表实现角色继承</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-%E4%BD%BF%E7%94%A8%E7%A4%BA%E4%BE%8B%EF%BC%9A%E6%88%98%E5%A3%AB%E4%B8%8E%E6%B3%95%E5%B8%88%E7%9A%84%E6%88%98%E6%96%97"><span class="toc-number">1.3.3.</span> <span class="toc-text">3. 使用示例：战士与法师的战斗</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-%E5%85%83%E8%A1%A8%E5%AE%9E%E7%8E%B0%E7%9A%84%E4%BC%98%E5%8A%BF"><span class="toc-number">1.3.4.</span> <span class="toc-text">4. 元表实现的优势</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%9B%9B%E3%80%81Lua-OOP-vs-TS-Rust%EF%BC%9A%E7%BB%99%E5%89%8D%E7%AB%AF-Rust-%E5%BC%80%E5%8F%91%E8%80%85%E7%9A%84%E5%AF%B9%E6%AF%94%E6%80%9D%E8%80%83"><span class="toc-number">1.4.</span> <span class="toc-text">四、Lua OOP vs TS&#x2F;Rust：给前端 &#x2F; Rust 开发者的对比思考</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%BA%94%E3%80%81%E6%80%BB%E7%BB%93%EF%BC%9ALua-OOP-%E7%9A%84%E6%9C%80%E4%BD%B3%E5%AE%9E%E8%B7%B5"><span class="toc-number">1.5.</span> <span class="toc-text">五、总结：Lua OOP 的最佳实践</span></a></li></ol></li></ol>
    </div>

    <div id="share-footer" style="display: none">
      <ul>
  <li><a class="icon" target="_blank" rel="noopener" href="http://www.facebook.com/sharer.php?u=http://example.com/2025/09/09/Lua%E7%9A%84%E9%9D%A2%E5%90%91%E5%AF%B9%E8%B1%A1/"><i class="fa fa-facebook fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="https://twitter.com/share?url=http://example.com/2025/09/09/Lua%E7%9A%84%E9%9D%A2%E5%90%91%E5%AF%B9%E8%B1%A1/&text=Lua的面向对象"><i class="fa fa-twitter fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="http://www.linkedin.com/shareArticle?url=http://example.com/2025/09/09/Lua%E7%9A%84%E9%9D%A2%E5%90%91%E5%AF%B9%E8%B1%A1/&title=Lua的面向对象"><i class="fa fa-linkedin fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="https://pinterest.com/pin/create/bookmarklet/?url=http://example.com/2025/09/09/Lua%E7%9A%84%E9%9D%A2%E5%90%91%E5%AF%B9%E8%B1%A1/&is_video=false&description=Lua的面向对象"><i class="fa fa-pinterest fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" href="mailto:?subject=Lua的面向对象&body=Check out this article: http://example.com/2025/09/09/Lua%E7%9A%84%E9%9D%A2%E5%90%91%E5%AF%B9%E8%B1%A1/"><i class="fa fa-envelope fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="https://getpocket.com/save?url=http://example.com/2025/09/09/Lua%E7%9A%84%E9%9D%A2%E5%90%91%E5%AF%B9%E8%B1%A1/&title=Lua的面向对象"><i class="fa fa-get-pocket fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="http://reddit.com/submit?url=http://example.com/2025/09/09/Lua%E7%9A%84%E9%9D%A2%E5%90%91%E5%AF%B9%E8%B1%A1/&title=Lua的面向对象"><i class="fa fa-reddit fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="http://www.stumbleupon.com/submit?url=http://example.com/2025/09/09/Lua%E7%9A%84%E9%9D%A2%E5%90%91%E5%AF%B9%E8%B1%A1/&title=Lua的面向对象"><i class="fa fa-stumbleupon fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="http://digg.com/submit?url=http://example.com/2025/09/09/Lua%E7%9A%84%E9%9D%A2%E5%90%91%E5%AF%B9%E8%B1%A1/&title=Lua的面向对象"><i class="fa fa-digg fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="http://www.tumblr.com/share/link?url=http://example.com/2025/09/09/Lua%E7%9A%84%E9%9D%A2%E5%90%91%E5%AF%B9%E8%B1%A1/&name=Lua的面向对象&description="><i class="fa fa-tumblr fa-lg" aria-hidden="true"></i></a></li>
</ul>

    </div>

    <div id="actions-footer">
      <ul>
        <li id="toc"><a class="icon" href="#" onclick='$("#toc-footer").toggle();return false;'><i class="fa fa-list fa-lg" aria-hidden="true"></i> TOC</a></li>
        <li id="share"><a class="icon" href="#" onclick='$("#share-footer").toggle();return false;'><i class="fa fa-share-alt fa-lg" aria-hidden="true"></i> Share</a></li>
        <li id="top" style="display:none"><a class="icon" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');"><i class="fa fa-chevron-up fa-lg" aria-hidden="true"></i> Top</a></li>
        <li id="menu"><a class="icon" href="#" onclick='$("#nav-footer").toggle();return false;'><i class="fa fa-bars fa-lg" aria-hidden="true"></i> Menu</a></li>
      </ul>
    </div>

  </div>
</div>

      
      <footer id="footer">
  <div class="footer-left">
    Copyright &copy; 2025 jiajun Hou
  </div>
  <div class="footer-right">
    <nav>
      <ul>
         
          <li><a href="/home/">Home</a></li>
         
          <li><a href="/about/">About</a></li>
         
          <li><a href="/archives/">Writing</a></li>
         
          <li><a target="_blank" rel="noopener" href="https://github.com/jiajunhou">Projects</a></li>
        
      </ul>
    </nav>
  </div>
</footer>

      
<script src="/lib/justified-gallery/jquery.justifiedGallery.min.js"></script>


<script src="/js/main.js"></script>

<!-- Google Analytics -->

<!-- Disqus Comments -->


    </div>
</body>
</html>
